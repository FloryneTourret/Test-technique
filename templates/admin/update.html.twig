{% extends 'base.html.twig' %}

{% block body %}


<div class="main">

    <form action="{{ path('add_article') }}" method="post">
        <fieldset class="uk-fieldset">
            
            <legend class="uk-legend">Modifier un article</legend>
            
            <div class="uk-margin">
                <input class="uk-input" type="text" placeholder="Titre" id="title" name="_title" value="{{article.title}}">
            </div>
            <div class="uk-margin">
                <input class="uk-input" type="text" placeholder="Description" id="desc" name="_description" value="{{article.description}}">
            </div>
            {# <div class="uk-margin">
                <div uk-form-custom="target: true">
                    <input type="file" accept="image/x-png,image/gif,image/jpeg" name="picture">
                    <input class="uk-input uk-form-width-medium" type="text" placeholder="Select file" disabled>
                </div>
            </div> #}
            
            <div class="uk-margin" uk-margin>
                <button class="uk-button uk-button-default" type="submit" >Modifier</button>
            </div>
            
        </fieldset>
    </form>
        
    
</div>
   
{% endblock %}

{% block javascripts %}

<script>
    $('form').submit(function(event) {

        // get the form data
        // there are many ways to get this data using jQuery (you can use the class or id also)
        var formData = {
            'title'              : $('input[name=_title]').val(),
            'description'        : $('input[name=_description]').val(),
            'picture'            : "/assets/img/phone.jpg",
            'username'           : '{{ app.user.username }}',
            'id'                 : '{{ id }}'
        };
        $.ajax({
            type        : 'PUT', // define the type of HTTP verb we want to use (POST for our form)
            url         : '/api/v1/article/' + {{ id }}, // the url where we want to POST
            data        : formData, // our data object
            dataType    : 'json', // what type of data do we expect back from the server
                        encode          : true
        })
            .done(function(data) {
                window.location.replace("/admin/article/" + {{ id }});
            });
        event.preventDefault();
    });
</script>

{% endblock %}